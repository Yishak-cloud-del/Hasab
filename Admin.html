<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HasabMedia Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ===== RESET & BASE STYLES ===== */
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
         :root {
            --primary-color: #2ecc71;
            --secondary-color: #27ae60;
            --accent-color: #16a085;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --bg-color: #f8f9fa;
            --text-color: #334155;
            --card-bg: #ffffff;
            --header-bg: #ffffff;
            --sidebar-bg: #2c3e50;
            --sidebar-text: #ffffff;
            --sidebar-hover: #34495e;
            --sidebar-active: #1abc9c;
            --border-color: #e1e4e8;
        }
        
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-color);
            color: var(--text-color);
            font-weight: 350;
            font-size: 12px;
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        a {
            color: inherit;
            text-decoration: none;
        }
        /* ===== LAYOUT STYLES ===== */
        
        .container-fluid-custom {
            display: flex;
            height: 100vh;
        }
        /* ===== HEADER STYLES ===== */
        
        .admin-header {
            width: 100%;
            background: var(--header-bg);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .admin-header .logo {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
        }
        
        .admin-header .header-icons {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 18px;
        }
        
        .admin-header .header-icons i {
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .admin-header .header-icons i:hover {
            color: var(--primary-color);
        }
        /* ===== SIDEBAR STYLES ===== */
        
        .sidebar {
            width: 250px;
            background-color: var(--sidebar-bg);
            color: var(--sidebar-text);
            display: flex;
            flex-direction: column;
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            z-index: 1001;
            transition: width 0.3s ease;
            overflow-x: hidden;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
        }
        
        .sidebar.collapsed {
            width: 70px;
        }
        
        .sidebar-header {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-logo {
            display: flex;
            align-items: center;
            overflow: hidden;
        }
        
        .logo-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-color);
            flex-shrink: 0;
        }
        
        .logo-circle img {
            width: 30px;
            height: 30px;
            object-fit: contain;
        }
        
        .sidebar-logo h2 {
            margin-left: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            white-space: nowrap;
            opacity: 1;
            transition: opacity 0.3s;
        }
        
        .sidebar.collapsed .sidebar-logo h2 {
            opacity: 0;
        }
        
        .toggle-btn {
            background: none;
            border: none;
            color: var(--sidebar-text);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        .toggle-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-menu {
            flex-grow: 1;
            padding: 20px 0;
            overflow-y: auto;
        }
        /* Submenu styles for dropdown items */
        
        .submenu {
            display: none;
        }
        
        .submenu .nav-item {
            padding-left: 50px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            margin-bottom: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            position: relative;
            white-space: nowrap;
        }
        
        .nav-item:hover {
            background-color: var(--sidebar-hover);
        }
        
        .nav-item.active {
            background-color: var(--sidebar-active);
            color: white;
        }
        
        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: white;
        }
        
        .nav-item i {
            font-size: 1.1rem;
            width: 30px;
            text-align: center;
            flex-shrink: 0;
        }
        
        .nav-item span {
            margin-left: 10px;
            opacity: 1;
            transition: opacity 0.3s;
        }
        
        .sidebar.collapsed .nav-item span {
            opacity: 0;
        }
        
        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Main Content */
        
        .main-content {
            margin-left: 250px;
            padding: 20px;
            overflow-y: auto;
            height: calc(100vh - 60px);
            flex-grow: 1;
            transition: margin-left 0.3s ease;
        }
        
        .sidebar.collapsed+.main-content {
            margin-left: 70px;
        }
        /* Headings */
        
        h1 {
            font-weight: 600;
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        h2 {
            font-weight: 600;
            font-size: 1.25rem;
            margin: 25px 0 15px;
            color: var(--dark-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
        }
        /* Form styling */
        
        form#newsForm,
        form#userForm,
        form#singleInputForm,
        form#articleForm,
        form#videoForm,
        form#addVideoForm {
            background: var(--card-bg);
            padding: 18px 22px;
            /* smaller padding */
            border-radius: 8px;
            /* slightly smaller corners */
            box-shadow: 0 1px 6px rgba(0, 0, 0, 0.05);
            transition: box-shadow 0.3s ease;
            max-width: 450px;
            /* reduced from 600px */
        }
        
        form#newsForm:hover,
        form#userForm:hover,
        form#singleInputForm:hover,
        form#articleForm:hover,
        form#videoForm:hover,
        form#addVideoForm:hover {
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .form-label {
            font-weight: 500;
            margin-bottom: 4px;
            /* tighter spacing */
            font-size: 0.85rem;
            /* smaller font */
        }
        
        input[type="text"],
        input[type="password"],
        input[type="email"],
        input[type="url"],
        input[type="date"],
        select,
        textarea,
        input[type="file"] {
            width: 100%;
            padding: 8px 12px;
            /* smaller input height */
            margin-bottom: 12px;
            /* tighter spacing */
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 0.85rem;
            /* smaller font */
            color: var(--text-color);
            background-color: var(--card-bg);
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            font-weight: 400;
            font-family: inherit;
            resize: vertical;
        }
        
        input:focus,
        select:focus,
        textarea:focus,
        input[type="file"]:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.2);
            /* slightly thinner focus */
            outline: none;
        }
        
        button[type="submit"],
        button[type="submit_v"],
        button[type="button"] {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 12px;
            /* smaller button */
            font-size: 0.85rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-weight: 400;
            font-family: inherit;
        }
        
        button:hover {
            background-color: var(--secondary-color);
        }
        /* Search/filter section */
        
        #searchInput,
        #filterDate,
        #userSearch,
        form#video input[type="url"],
        form#addVideoForm input[type="url"],
        form#videoForm input[type="url"] {
            width: 46%;
            padding: 7px 12px;
            margin: 8px 1% 15px 0;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            font-size: 0.85rem;
            color: var(--text-color);
            background: var(--card-bg);
            transition: border-color 0.3s ease;
            font-family: inherit;
        }
        
        #searchInput:focus,
        #filterDate:focus,
        #userSearch:focus,
        form#video input[type="url"]:focus,
        form#addVideoForm input[type="url"]:focus,
        form#videoForm input[type="url"]:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(46, 204, 113, 0.2);
        }
        
        button.filter-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            padding: 7px 14px;
            /* smaller padding */
            margin: 4px 8px 15px 0;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.85rem;
            font-family: inherit;
        }
        
        button.filter-btn:hover {
            background-color: var(--secondary-color);
        }
        /* Articles container */
        
        #results,
        #userResults,
        .video-list-container {
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            padding: 25px 20px;
            max-width: 600px;
            transition: box-shadow 0.3s ease;
        }
        
        #results:hover,
        #userResults:hover,
        .video-list-container:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        /* Section headings inside results */
        
        #results h3,
        #userResults h3 {
            font-weight: 600;
            font-size: 1.1rem;
            margin: 15px 0 15px 5px;
            color: var(--dark-color);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 5px;
        }
        /* Table styling */
        
        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        table {
            width: 80%;
            border-collapse: collapse;
            margin-top: 20px;
            color: var(--text-color);
        }
        
        th,
        td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }
        
        th {
            background-color: var(--bg-color);
            font-weight: 600;
            color: var(--dark-color);
        }
        
        tr:hover {
            background-color: rgba(46, 204, 113, 0.05);
        }
        /* Article styling (for table thumbnails) */
        
        .thumb {
            max-width: 100px;
            max-height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }
        /* Delete/Edit button for tables */
        
        .btn-sm {
            padding: .25rem .5rem;
            font-size: .875rem;
            border-radius: .2rem;
            margin-right: 5px;
        }
        
        .btn-danger {
            background-color: var(--danger-color);
            color: white;
            border: none;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-info {
            background-color: #3498db;
            color: white;
            border: none;
        }
        
        .btn-info:hover {
            background-color: #2980b9;
        }
        /* Video section specific styles */
        
        #video-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .video-item {
            cursor: pointer;
            transition: transform 0.2s;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            background-color: var(--card-bg);
            display: flex;
            flex-direction: column;
        }
        
        .video-item:hover {
            transform: translateY(-5px);
        }
        
        .video-item img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }
        
        .video-item p {
            padding: 10px;
            margin: 0;
            font-size: 0.9rem;
            color: var(--text-color);
        }
        
        .delete-btn {
            margin: 0 10px 10px;
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            align-self: flex-end;
        }
        
        .delete-btn:hover {
            background-color: #c0392b;
        }
        /* Alert styles */
        
        .alert {
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
        }
        
        .alert-success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid var(--success-color);
        }
        
        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid var(--danger-color);
        }
        
        #statusMessage {
            display: none;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            min-width: 300px;
        }
        /* Stats cards */
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card h3 {
            margin-top: 0;
            color: var(--text-color);
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin: 10px 0;
        }
        
        .stat-card .trend {
            font-size: 0.60rem;
            color: #64748b;
        }
        
        .trend.up {
            color: var(--success-color);
        }
        
        .trend.down {
            color: var(--danger-color);
        }
        /* Logout button */
        
        .logout-btn {
            background-color: var(--danger-color);
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px 15px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logout-btn:hover {
            background-color: #c0392b;
        }
        
        .logout-btn i {
            margin-right: 8px;
        }
        /* Popup styles */
        
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        /* List styling */
        
        #inputsList {
            list-style-type: none;
            padding: 0;
        }
        
        #inputsList li {
            background: var(--card-bg);
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        #inputsList li button {
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        /* Responsive */
        
        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
            }
            .sidebar-logo h2 {
                opacity: 0;
            }
            .nav-item span {
                opacity: 0;
            }
            .main-content {
                margin-left: 70px;
            }
            #searchInput,
            #filterDate,
            #userSearch,
            form#video input[type="url"],
            form#addVideoForm input[type="url"],
            form#videoForm input[type="url"] {
                width: 70%;
                margin: 10px 0 20px 0;
            }
            .stats-container {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .admin-header {
                padding: 10px 15px;
            }
            .admin-header .logo {
                font-size: 18px;
            }
            .admin-header .header-icons {
                gap: 15px;
                font-size: 16px;
            }
            .main-content {
                padding: 15px;
            }
            .stats-container {
                grid-template-columns: 1fr;
            }
            #video-list {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            #youtube-container iframe {
                width: 80%;
                height: 150px;
            }
        }
        
        @media (max-width: 576px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            .main-content {
                margin-left: 0;
            }
            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: var(--text-color);
                font-size: 1.2rem;
                cursor: pointer;
            }
        }
        /* Mobile menu button (hidden by default) */
        
        .mobile-menu-btn {
            display: none;
        }
        /* General Layout */
        
        section {
            margin: 30px auto;
            padding: 20px;
            max-width: 900px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1,
        h2 {
            font-family: Arial, sans-serif;
            margin-bottom: 15px;
            color: #2e7d32;
            /* dark green */
        }
        /* Form Styling */
        
        form {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        form input[type="text"],
        form textarea,
        form input[type="file"] {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 14px;
        }
        
        form button {
            padding: 10px;
            background: #2ecc71;
            /* green */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        form button:hover {
            background: #27ae60;
            /* darker green */
        }
        /* Gallery Styling */
        
        #gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        #gallery div {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            background: #f9f9f9;
        }
        
        #gallery img {
            max-width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        
        #gallery h3 {
            margin: 8px 0 5px;
            font-size: 16px;
            color: #2e7d32;
            /* dark green */
        }
        
        #gallery p {
            font-size: 13px;
            color: #555;
        }
        /* Table for Existing Titles */
        
        #articlesContainer {
            margin-top: 15px;
            overflow-x: auto;
        }
        
        #articlesContainer table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        
        #articlesContainer th,
        #articlesContainer td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            font-size: 14px;
        }
        
        #articlesContainer th {
            background: #2ecc71;
            /* green header */
            color: white;
            text-transform: uppercase;
            font-size: 13px;
        }
        
        #articlesContainer tr:nth-child(even) {
            background: #f9f9f9;
        }
        
        #articlesContainer tr:hover {
            background: #eafaf1;
            /* light green hover */
        }
    </style>
</head>

<body>
    <header class="admin-header">
        <div class="logo">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
        <i class="fas fa-bars"></i>
      </button>
        </div>
        <div class="header-icons">
            <i class="fa-solid fa-gear" title="Settings"></i>

            <i class="fa-solid fa-user-circle" title="Account"></i>
        </div>
    </header>

    <div class="container-fluid-custom">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="logo-circle">
                        <img src="/img/logo.png" alt="Logo">
                    </div>
                    <h2>HasabMedia</h2>
                </div>
                <button class="toggle-btn" id="toggleSidebar">
          <i class="fas fa-angle-left"></i>
        </button>
            </div>

            <div class="sidebar-menu">
                <div class="nav-item" onclick="showSection('statistics')">
                    <i class="fa-duotone fa-solid fa-chart-line"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" id="addNewsToggle">
                    <i class="fas fa-plus-circle"></i>
                    <span>Add News</span>
                    <i class="fas fa-caret-down" style="margin-left:auto;"></i>
                </div>
                <div class="submenu" id="addNewsSubmenu">
                    <div class="nav-item" data-section="addNews" onclick="showSection('addNews')">
                        <i class="fas fa-mobile-alt"></i>
                        <span>Add news to Web</span>
                    </div>
                    <div class="nav-item" data-section="addNewsToApp" onclick="showSection('addNewsToApp')">
                        <i class="fas fa-globe"></i>
                        <span>Add news to App</span>
                    </div>
                </div>
                <div class="nav-item" onclick="showSection('allNews')">
                    <i class="fas fa-newspaper"></i>
                    <span>All News</span>
                </div>
                <div class="nav-item" onclick="showSection('alert')">
                    <i class="fas fa-bell"></i>
                    <span>Alert</span>
                </div>
                <div class="nav-item" onclick="showSection('add tit')">
                    <i class="fas fa-heading"></i>
                    <span>Title Manager</span>
                </div>
                <div class="nav-item" onclick="showSection('link')">
                    <i class="fas fa-link"></i>
                    <span>link add</span>
                </div>
                <div class="nav-item" onclick="showSection('video')">
                    <i class="fas fa-video"></i>
                    <span>Video</span>
                </div>

                <div class="nav-item" onclick="showSection('home page')">
                    <i class="fas fa-youtube"></i>
                    <span>Home Page Video</span>
                </div>
                <div class="nav-item" onclick="showSection('home news')">
                    <i class="fas fa-language"></i>
                    <span>home page side right </span>
                </div>
                <div class="nav-item" onclick="showSection('home news_u')">
                    <i class="fas fa-image"></i>
                    <span>main home page today baner </span>
                </div>
                <div class="nav-item" onclick="showSection('allNews am')">
                    <i class="fas fa-list-alt"></i>
                    <span>All News Am</span>
                </div>
                <div class="nav-item" onclick="showSection('userManagement')">
                    <i class="fas fa-user"></i>
                    <span>User Management</span>
                </div>
                <div class="nav-item" onclick="showSection('ads img')">
                    <i class="fas fa-ad"></i>
                    <span>Ads Image</span>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="logout-btn" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Logout</span>
        </button>
            </div>
        </aside>

        <main class="main-content">
            <div id="statusMessage" class="alert"></div>

            <section id="statistics" style="display:none;">
                <h1>Dashboard</h1>
                <div class="stats-container">
                    <div class="stat-card">
                        <h3>Total News Articles</h3>
                        <div class="value" id="totalArticles">0</div>
                        <div class="trend up">+12% from last month</div>
                    </div>
                    <div class="stat-card">
                        <h3>Total Users</h3>
                        <div class="value" id="totalUsers">0</div>
                        <div class="trend up">+5% from last month</div>
                    </div>
                    <div class="stat-card">
                        <h3>Active Today</h3>
                        <div class="value" id="activeToday">0</div>
                        <div class="trend down">-2% from yesterday</div>
                    </div>
                    <div class="stat-card">
                        <h3>New This Week</h3>
                        <div class="value" id="newThisWeek">0</div>
                        <div class="trend up">+8% from last week</div>
                    </div>
                </div>
                <h2>Recent Activity</h2>
                <div id="activityLog" style="background: white; border-radius: 10px; padding: 20px;">
                    Loading activity log...
                </div>
            </section>
            <section id="userManagement" style="display:none;">
                <h1>User Management</h1>
                <div class="user-actions">
                    <button class="filter-btn" onclick="showCreateUserForm()">Create New User</button>
                    <input type="text" id="userSearch" placeholder="Search users..." oninput="filterUsers()" />
                </div>
                <div id="createUserForm" style="display:none; margin-top:20px;">
                    <h2>Create New User</h2>
                    <form id="userForm">
                        <input type="text" id="username" name="username" placeholder="Username" required />
                        <input type="email" id="email" name="email" placeholder="Email" required />
                        <input type="password" id="password" name="password" placeholder="Password" required />
                        <select id="role" name="role" required>
              <option value="">Select Role</option>
              <option value="admin">Admin</option>
              <option value="editor">Editor</option>
              <option value="viewer">Viewer</option>
            </select>
                        <button type="submit">Create User</button>
                    </form>
                </div>
                <div id="userResults" style="margin-top:20px;">
                    <h2>Existing Users</h2>
                    <div id="userListContainer">
                        <p class="text-center text-muted">Loading users...</p>
                    </div>
                </div>
            </section>

            <section id="addNews">
                <h1>Add New Article</h1>
                <form id="newsForm" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="title" class="form-label">Title</label>
                        <input type="text" class="form-control" id="title" name="title">
                    </div>
                    <div class="mb-3">
                        <label for="content" class="form-label">Content</label>
                        <textarea class="form-control" id="content" name="content" rows="5"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="categorySelect" class="form-label">Category</label>
                        <select class="form-select" id="categorySelect" name="category_id" required>
              <option value="">Select a category</option>
            </select>
                    </div>
                    <div class="mb-3">
                        <label for="image" class="form-label">Image</label>
                        <input type="file" class="form-control" id="image" name="image" accept="image/*">
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="is_featured" name="is_featured">
                        <label class="form-check-label" for="is_featured">Featured Article</label>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="is_breaking" name="is_breaking">
                        <label class="form-check-label" for="is_breaking">Breaking News</label>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </section>




            <section id="addNewsToApp">
                <h1>Add New Article (App)</h1>
                <form id="newsFormApp" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="title_app" class="form-label">Title</label>
                        <input type="text" class="form-control" id="title_app" name="title">
                    </div>
                    <div class="mb-3">
                        <label for="content_app" class="form-label">Content</label>
                        <textarea class="form-control" id="content_app" name="content" rows="5"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="categorySelectApp" class="form-label">Category</label>
                        <select class="form-select" id="categorySelectApp" name="category_id" required>
              <option value="">Select a category</option>
            </select>
                    </div>
                    <div class="mb-3">
                        <label for="image_app" class="form-label">Image</label>
                        <input type="file" class="form-control" id="image_app" name="image" accept="image/*">
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="is_featured_app" name="is_featured">
                        <label class="form-check-label" for="is_featured_app">Featured Article</label>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="is_breaking_app" name="is_breaking">
                        <label class="form-check-label" for="is_breaking_app">Breaking News</label>
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </section>









            <section id="home news">

                <h2>Upload Banner home page </h2>
                <form id="uploadForm" enctype="multipart/form-data">
                    <input type="text" name="title" placeholder="Title" required>
                    <input type="text" name="description" placeholder="Description" required>
                    <input type="file" name="image" accept="image/*" required>
                    <button type="submit">Upload</button>
                </form>

                <h2>Gallery</h2>
                <div id="galler"></div>
            </section>
            <section id="home news_u">

                <h2>Upload Banner main page main</h2>
                <form id="uploadFor" enctype="multipart/form-data">
                    <input type="text" name="title" placeholder="Title" required>
                    <input type="text" name="description" placeholder="Description" required>
                    <input type="file" name="image" accept="image/*" required>
                    <button type="submit">Upload</button>
                </form>

                <h2>Gallery</h2>
                <div id="galls"></div>
            </section>
            <section id="allNews" style="display:none;">
                <h1>Articles List</h1>
                <input type="text" id="searchInput" placeholder="Search by title..." oninput="filterNews()" />
                <input type="date" id="filterDate" onchange="filterByDate()" />
                <button class="filter-btn" onclick="showToday()">Today Only</button>
                <button class="filter-btn" onclick="showOldNewsOnly()">Old News Only</button>
                <button class="filter-btn" onclick="loadArticles()">Clear Filters</button>
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Title</th>
                                <th>Category</th>
                                <th>Image</th>
                                <th>Featured</th>
                                <th>Breaking</th>
                                <th>Created At</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="articlesTableBody">
                            <tr>
                                <td colspan="8" class="text-center">Loading articles...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="alert">
                <h1>Alert Manager</h1>
                <form id="singleInputForm">
                    <input type="text" id="userInput" placeholder="Enter alert text" required>
                    <button type="submit">Submit</button>
                </form>
                <h2>All Alerts</h2>
                <ul id="inputsList"></ul>
            </section>

            <section id="link">
                <h2>Add Title + Link</h2>
                <form id="linkForm">
                    <input type="text" id="title" placeholder="Title">
                    <input type="url" id="url" placeholder="https://example.com">
                    <button type="submit">Add</button>
                </form>

                <h3>All Titles</h3>
                <ul id="linksList"></ul>

            </section>

            <section id="ads img">
                <h2>Upload Image with Title & Description</h2>
                <form id="uploadForm" enctype="multipart/form-data">
                    <input type="text" name="title" placeholder="Enter Title" required>
                    <input type="text" name="description" placeholder="Enter Description" required>
                    <input type="file" name="image" accept="image/*" required>
                    <button type="submit">Upload</button>
                </form>

                <h2>Gallery</h2>
                <div id="gallery"></div>

            </section>

            <section id="add tit">
                <h1>Title Manager</h1>
                <h2>Add New Title</h2>
                <form id="articleForm">
                    <input type="text" id="titles" placeholder="Title">
                    <textarea id="description" placeholder="Description" rows="5"></textarea>
                    <button type="submit">Add Title</button>
                </form>
                <h2>Existing Titles</h2>
                <div id="articlesContainer"></div>
            </section>

            <section id="video" style="display:none;">
                <h1>YouTube Video Collection</h1>
                <form id="addVideoForm">
                    <input type="url" id="videoUrl" name="url" placeholder="Paste YouTube Link" required>
                    <input type="text" id="videoTitle" name="title" placeholder="Video Title (optional)">
                    <button type="submit_v">Add Video</button>
                </form>
                <div id="youtube-container">
                    <iframe id="youtubePlayer" width="560" height="315" frameborder="0" allowfullscreen></iframe>
                </div>
                <div id="video-list">
                    <!-- Videos will be loaded here dynamically -->
                </div>
            </section>

            <section id="home page" style="display:none;">
                <h1>Home Page Videos</h1>
                <form id="videoFo">
                    <input type="text" id="videoUr" placeholder="YouTube URL" required>
                    <input type="text" id="title" placeholder="Title (optional)">
                    <button type="submit">Add Video</button>
                </form>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Video</th>
                            <th>Created At</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="videoTable"></tbody>
                </table>
            </section>
        </main>
    </div>

    <div id="popup" class="popup" style="display:none;"></div>
    <div id="overlay" class="overlay" style="display:none;" onclick="closePopup()"></div>

    <!-- Dark Mode Toggle Button -->
    <button class="dark-mode-toggle" onclick="toggleDarkMode()">
    <i class="fas fa-moon"></i>
  </button>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"></script>
    <script>
        // Set your API base URL so relative "/api" calls work when opening this file directly
        // Change this to your backend host if different
        window.API_BASE = window.API_BASE || 'http://localhost:3000';
    </script>
    <script>
        // Authentication check - must come before ANY other code
        // API base configuration for hosted environments
        (function(){
            // Set this to your deployed Node API base, e.g. 'https://your-api-host.com'
            const API_BASE = window.API_BASE || '';
            if (!API_BASE) return; // No override, use relative /api paths
            const originalFetch = window.fetch.bind(window);
            window.fetch = (input, init) => {
                try {
                    let url = typeof input === 'string' ? input : (input && input.url) || '';
                    if (url.startsWith('/api')) {
                        const prefixedUrl = API_BASE.replace(/\/$/, '') + url;
                        if (typeof input === 'string') {
                            return originalFetch(prefixedUrl, init);
                        } else {
                            const req = new Request(prefixedUrl, input);
                            return originalFetch(req, init);
                        }
                    }
                } catch(_){}
                return originalFetch(input, init);
            };
        })();

        // Toggle sidebar functionality
        document.getElementById('toggleSidebar').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('collapsed');

            // Change icon based on sidebar state
            const icon = this.querySelector('i');
            if (sidebar.classList.contains('collapsed')) {
                icon.classList.remove('fa-angle-left');
                icon.classList.add('fa-angle-right');
            } else {
                icon.classList.remove('fa-angle-right');
                icon.classList.add('fa-angle-left');
            }
        });

        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('mobile-open');
        });
        // Toggle dark mode function
        function toggleDarkMode() {
            const body = document.body;
            const icon = document.querySelector('.dark-mode-toggle i');

            body.classList.toggle('dark-mode');

            if (body.classList.contains('dark-mode')) {
                localStorage.setItem('darkMode', 'enabled');
                icon.className = 'fas fa-sun';
            } else {
                localStorage.setItem('darkMode', 'disabled');
                icon.className = 'fas fa-moon';
            }
        }


        // Clear flag when browser closes (optional)
        window.addEventListener('beforeunload', () => {
            localStorage.removeItem('isAuthenticated');
        });
        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            loadCategories();
            showSection('statistics'); // Default to 'Add News' section on load
        });

        const statusMessageDiv = document.getElementById('statusMessage');
        const articlesTableBody = document.getElementById('articlesTableBody');
        const newsForm = document.getElementById('newsForm');
        const submitBtn = newsForm.querySelector('button[type="submit"]');
        let articles = [];
        let users = [];
        let currentUserId = null;


        // Show status message helper
        function showStatusMessage(message, type) {
            statusMessageDiv.textContent = message;
            statusMessageDiv.className = `alert alert-${type}`;
            statusMessageDiv.style.display = 'block';
            setTimeout(() => {
                statusMessageDiv.style.display = 'none';
            }, 5000);
        }

        // Navigation between sections
        function showSection(sectionId) {
            document.querySelectorAll('main section').forEach(sec => {
                sec.style.display = 'none'; // Hide all sections first
            });
            document.getElementById(sectionId).style.display = 'block'; // Show the selected section
            document.querySelectorAll('.nav-item').forEach(nav => {
                // Prefer explicit data-section mapping when present (for submenu items)
                const dataTarget = nav.dataset ? nav.dataset.section : undefined;
                if (dataTarget) {
                    nav.classList.toggle('active', dataTarget === sectionId);
                } else {
                    // Fallback to legacy text matching for top-level items
                    const navText = nav.textContent.replace(/\s+/g, '').toLowerCase();
                    const targetSectionText = sectionId.replace(/([A-Z])/g, ' $1').trim().toLowerCase().replace(/\s+/g, '');
                    nav.classList.toggle('active', navText === targetSectionText);
                }
            });
            // Load data specific to the section
            if (sectionId === 'allNews') loadArticles();
            if (sectionId === 'userManagement') loadUsers();
            if (sectionId === 'statistics') loadStatistics();
            if (sectionId === 'video') loadVideos();
        }

        // Toggle Add News submenu
        const addNewsToggle = document.getElementById('addNewsToggle');
        if (addNewsToggle) {
            addNewsToggle.addEventListener('click', () => {
                const submenu = document.getElementById('addNewsSubmenu');
                const caret = addNewsToggle.querySelector('.fa-caret-down');
                if (submenu.style.display === 'block') {
                    submenu.style.display = 'none';
                    if (caret) caret.style.transform = 'rotate(0deg)';
                } else {
                    submenu.style.display = 'block';
                    if (caret) caret.style.transform = 'rotate(180deg)';
                }
            });
        }

        // Load categories into dropdown
        async function loadCategories() {
            try {
                const res = await fetch('/api/categories');
                if (!res.ok) throw new Error('Failed to load categories');
                const categories = await res.json();
                const selectWeb = document.getElementById('categorySelect');
                if (selectWeb) {
                    selectWeb.innerHTML = '<option value="">Select a category</option>';
                }
                const selectApp = document.getElementById('categorySelectApp');
                if (selectApp) {
                    selectApp.innerHTML = '<option value="">Select a category</option>';
                }
                categories.forEach(cat => {
                    const opt1 = document.createElement('option');
                    opt1.value = cat.id;
                    opt1.textContent = cat.name.charAt(0).toUpperCase() + cat.name.slice(1);
                    if (selectWeb) selectWeb.appendChild(opt1);
                    if (selectApp) {
                        const opt2 = document.createElement('option');
                        opt2.value = cat.id;
                        opt2.textContent = opt1.textContent;
                        selectApp.appendChild(opt2);
                    }
                });
            } catch (e) {
                console.error('Error loading categories:', e);
                showStatusMessage('Error loading categories.', 'danger');
            }
        }

        const linkForm = document.getElementById('linkForm');
        const linksList = document.getElementById('linksList');

        // Add new title
        linkForm.addEventListener('submit', async e => {
            e.preventDefault();
            const title = document.getElementById('title').value.trim();
            const url = document.getElementById('url').value.trim();
            if (!title) return alert('Title is required');

            const res = await fetch('/api/links', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    title,
                    url
                })
            });

            const data = await res.json();
            if (data.success) {
                linkForm.reset();
                loadLinks();
            } else {
                alert(data.message || 'Error adding title');
            }
        });

        // Load all titles
        async function loadLinks() {
            const res = await fetch('/api/links');
            const data = await res.json();
            linksList.innerHTML = '';
            data.forEach(link => {
                const li = document.createElement('li');
                li.innerHTML = `<a href="${link.url || '#'}" target="_blank">${link.title}</a>
                    <button onclick="deleteLink(${link.id})">Delete</button>`;
                linksList.appendChild(li);
            });
        }

        // Delete title
        async function deleteLink(id) {
            if (!confirm('Delete this item?')) return;
            const res = await fetch('/api/links/' + id, {
                method: 'DELETE'
            });
            const data = await res.json();
            if (data.success) loadLinks();
            else alert(data.message || 'Failed to delete');
        }

        // Initial load
        loadLinks();



        // Load all articles to table this i use final<button class="btn btn-info btn-sm me-2 edit-btn" data-id="${a.id}">Edit</button>
        async function loadArticles() {
            try {
                articlesTableBody.innerHTML = '<tr><td colspan="8" class="text-center">Loading articles...</td></tr>';
                const res = await fetch('/api/articles');
                if (!res.ok) throw new Error('Failed to load articles');
                const {
                    articles: fetchedArticles
                } = await res.json();
                articles = fetchedArticles;
                articlesTableBody.innerHTML = '';
                if (articles.length === 0) {
                    articlesTableBody.innerHTML = `<tr><td colspan="8" class="text-center">No articles found</td></tr>`;
                    return;
                }
                articles.forEach(a => {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
            <td>${a.id}</td>
            <td>${a.title}</td>
            <td>${a.category_name || 'N/A'}</td>
            <td>${a.image_url ? `<img src="${a.image_url}" class="thumb" alt="Image">` : ''}</td>
            <td>${a.is_featured ? 'Yes' : 'No'}</td>
            <td>${a.is_breaking ? 'Yes' : 'No'}</td>
            <td>${new Date(a.created_at).toLocaleString()}</td>
            <td>
            
              <button class="btn btn-danger btn-sm delete-btn" data-id="${a.id}">Delete</button>
              <button class="btn btn-info btn-sm me-2 edit-btn" data-id="${a.id}">Edit</button>
            </td>
          `;
          articlesTableBody.appendChild(tr);
        });
        // Attach delete event listeners
        document.querySelectorAll('.delete-btn').forEach(btn => {
          btn.addEventListener('click', async e => {
            const id = e.target.dataset.id;
            if (confirm('Are you sure you want to delete this article?')) {
              await deleteArticle(id);
            }
          });
        });
        // Attach edit event listeners
        document.querySelectorAll('.edit-btn').forEach(btn => {
          btn.addEventListener('click', async e => {
            const id = e.target.dataset.id;
            await openEditArticleModal(id);
          });
        });
      } catch (e) {
        console.error('Error loading articles:', e);
        articlesTableBody.innerHTML = `<tr><td colspan="8" class="text-danger text-center">Error loading articles.</td></tr>`;
        showStatusMessage('Failed to load articles.', 'danger');
      }
    }
    
    
    // Delete article by ID
    async function deleteArticle(id) {
      try {
        const res = await fetch(`/api/articles/${id}`, {
          method: 'DELETE',
          headers: {
            'Content-Type': 'application/json'
          }
        });
        if (!res.ok) {
          const error = await res.json();
          throw new Error(error.message || 'Failed to delete article');
        }
        showStatusMessage('Article deleted successfully.', 'success');
        await loadArticles();
      } catch (e) {
        console.error('Error deleting article:', e);
        showStatusMessage(e.message || 'Failed to delete article.', 'danger');
      }
    }
    
    // Handle form submission to add article
    newsForm.addEventListener('submit', async e => {
      e.preventDefault();
      submitBtn.disabled = true;
      const formData = new FormData(newsForm);
      formData.set('is_featured', document.getElementById('is_featured').checked ? 'true' : 'false');
      formData.set('is_breaking', document.getElementById('is_breaking').checked ? 'true' : 'false');
      try {
        const res = await fetch('/api/articles', {
          method: 'POST',
          body: formData,
        });
        if (res.ok) {
          showStatusMessage('Article added successfully!', 'success');
          newsForm.reset();
          await loadArticles();
          showSection('allNews');
        } else {
          const error = await res.json();
          throw new Error(error.message || 'Failed to add article');
        }
      } catch (error) {
        console.error('Error adding article:', error);
        showStatusMessage(error.message || 'Failed to add article.', 'danger');
      } finally {
        submitBtn.disabled = false;
      }
    });

    // Handle form submission to add article to Flutter app
    const newsFormApp = document.getElementById('newsFormApp');
    if (newsFormApp) {
      const submitBtnApp = newsFormApp.querySelector('button[type="submit"]');
      newsFormApp.addEventListener('submit', async e => {
        e.preventDefault();
        if (submitBtnApp) submitBtnApp.disabled = true;
        const formData = new FormData(newsFormApp);
        formData.set('is_featured', document.getElementById('is_featured_app').checked ? 'true' : 'false');
        formData.set('is_breaking', document.getElementById('is_breaking_app').checked ? 'true' : 'false');
        try {
          const res = await fetch('/api/app/articles', {
            method: 'POST',
            body: formData,
          });
          if (!res.ok) {
            const error = await res.json();
            throw new Error(error.message || 'Failed to add app article');
          }
          showStatusMessage('App article added successfully!', 'success');
          newsFormApp.reset();
        } catch (error) {
          console.error('Error adding app article:', error);
          showStatusMessage(error.message || 'Failed to add app article.', 'danger');
        } finally {
          if (submitBtnApp) submitBtnApp.disabled = false;
        }
      });
    }
    
    // ---------------- Article Management ----------------
const articleForm = document.getElementById('articleForm');
const articlesContainer = document.getElementById('articlesContainer');

async function loadArticle() {
  try {
    const res = await fetch('/api/my-articles');
    const data = await res.json();
    if(!articlesContainer) return;
    articlesContainer.innerHTML = '';
    data.forEach(article => {
      const div = document.createElement('div');
      div.className = 'article';
      div.innerHTML = `
        <h3>${article.title}</h3>
        <p>${article.description}</p>
        <small>Created: ${article.created_at}</small>
        <div class="article-actions">
          <button onclick="editArticle(${article.id}, '${article.title.replace(/'/g,"\\'")}', '${article.description.replace(/'/g,"\\'")}')">Edit</button>
          <button onclick="deleteArticle(${article.id})">Delete</button>
        </div>
      `;
      articlesContainer.appendChild(div);
    });
  } catch(err) {
    console.error('Error loading articles:', err);
  }
}

if(articleForm){
  articleForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const title = document.getElementById('title').value.trim();
    const description = document.getElementById('description').value.trim();
    if(!title || !description) return alert('Both fields are required.');
    try {
      const res = await fetch('/api/add-my-article', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ title, description })
      });
      const result = await res.json();
      if(result.success){
        alert('Article added successfully!');
        articleForm.reset();
        loadArticles();
      } else alert('Error: ' + result.message);
    } catch(err) { console.error(err); alert('Error adding article.'); }
  });
}

async function editArticl(id, oldTitle, oldDesc){
  const title = prompt("Edit Title:", oldTitle);
  if(title === null) return;
  const description = prompt("Edit Description:", oldDesc);
  if(description === null) return;
  try {
    const res = await fetch(`/api/my-articles/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ title, description })
    });
    const result = await res.json();
    if(result.success) loadArticles();
    else alert('Error: ' + result.message);
  } catch(err) { console.error(err); alert('Error updating article'); }
}

async function deleteArticl(id){
  if(!confirm('Are you sure you want to delete this article?')) return;
  try {
    const res = await fetch(`/api/my-articles/${id}`, { method: 'DELETE' });
    const result = await res.json();
    if(result.success) loadArticles();
    else alert('Error: ' + result.message);
  } catch(err){ console.error(err); alert('Error deleting article'); }
}
 
    loadArticle();
    // User Management Functions
    async function loadUsers() {
      const userListContainer = document.getElementById('userListContainer');
      userListContainer.innerHTML = '<p class="text-center text-muted">Loading users...</p>';
      
      try {
        const res = await fetch('/api/users');
        if (!res.ok) throw new Error('Failed to load users');
        users = await res.json();
        
        displayUsers(users);
      } catch (e) {
        console.error('Error loading users:', e);
        userListContainer.innerHTML = '<p class="text-center text-danger">Error loading users.</p>';
        showStatusMessage('Failed to load users.', 'danger');
      }
    }
    
    function displayUsers(list) {
      const userListContainer = document.getElementById('userListContainer');
      userListContainer.innerHTML = '';
      
      if (list.length === 0) {
        userListContainer.innerHTML = '<p class="text-center text-muted">No users found.</p>';
        return;
      }
      
      list.forEach(user => {
        const userCard = document.createElement('div');
        userCard.className = 'user-card';
        userCard.innerHTML = `
          <div class="user-info">
            <div class="user-name">${user.username}</div>
            <div class="user-email">${user.email}</div>
            <div class="user-role role-${user.role}">${user.role.charAt(0).toUpperCase() + user.role.slice(1)}</div>
          </div>
          <div>
            <button class="edit-btn btn btn-info btn-sm me-2" data-id="${user.id}">Edit</button>
            <button class="delete-btn btn btn-danger btn-sm" data-id="${user.id}">Delete</button>
          </div>
        `;
        userListContainer.appendChild(userCard);
      });
     //home page vedio 
	

      // Attach delete event listeners
      document.querySelectorAll('#userListContainer .delete-btn').forEach(btn => {
        btn.addEventListener('click', async e => {
          const id = e.target.dataset.id;
          if (confirm(`Are you sure you want to delete user ID: ${id}?`)) {
            await deleteUser(id);
          }
        });
      });
      
      // Attach edit event listeners
      document.querySelectorAll('#userListContainer .edit-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          const id = e.target.dataset.id;
          alert(`Edit functionality for user ID: ${id} is not yet implemented.`);
        });
      });
    }
    
    function showCreateUserForm() {
      const form = document.getElementById('createUserForm');
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }
    
    // Handle user form submission

     // User Management Functions
    async function loadUsers() {
      const userListContainer = document.getElementById('userListContainer');
      userListContainer.innerHTML = '<p class="text-center text-muted">Loading users...</p>';
      
      try {
        const res = await fetch('/api/users');
        if (!res.ok) throw new Error('Failed to load users');
        users = await res.json();
        
        displayUsers(users);
      } catch (e) {
        console.error('Error loading users:', e);
        userListContainer.innerHTML = '<p class="text-center text-danger">Error loading users.</p>';
        showStatusMessage('Failed to load users.', 'danger');
      }
    }
    
    function displayUsers(list) {
      const userListContainer = document.getElementById('userListContainer');
      userListContainer.innerHTML = '';
      
      if (list.length === 0) {
        userListContainer.innerHTML = '<p class="text-center text-muted">No users found.</p>';
        return;
      }
      
      list.forEach(user => {
        const userCard = document.createElement('div');
        userCard.className = 'user-card';
        userCard.innerHTML = `
          <div class="user-info">
            <div class="user-name">${user.username}</div>
            <div class="user-email">${user.email}</div>
            <div class="user-role role-${user.role}">${user.role.charAt(0).toUpperCase() + user.role.slice(1)}</div>
          </div>
          <div>
            <button class="edit-btn btn btn-info btn-sm me-2" data-id="${user.id}">Edit</button>
            <button class="delete-btn btn btn-danger btn-sm" data-id="${user.id}">Delete</button>
          </div>
        `;
        userListContainer.appendChild(userCard);
      });
      
      // Attach delete event listeners
      document.querySelectorAll('#userListContainer .delete-btn').forEach(btn => {
        btn.addEventListener('click', async e => {
          const id = e.target.dataset.id;
          if (confirm(`Are you sure you want to delete user ID: ${id}?`)) {
            await deleteUser(id);
          }
        });
      });
      
      // Attach edit event listeners
      document.querySelectorAll('#userListContainer .edit-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          const id = e.target.dataset.id;
          alert(`Edit functionality for user ID: ${id} is not yet implemented.`);
        });
      });
    }
    
    function showCreateUserForm() {
      const form = document.getElementById('createUserForm');
      form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }
    
    // Handle user form submission
    document.getElementById('userForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const username = document.getElementById('username').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const role = document.getElementById('role').value;
      
      try {
        const res = await fetch('/api/users', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ username, email, password, role })
        });
        
        if (res.ok) {
          showStatusMessage('User created successfully!', 'success');
          this.reset();
          document.getElementById('createUserForm').style.display = 'none';
          await loadUsers();
        } else {
          const error = await res.json();
          throw new Error(error.message || 'Failed to create user');
        }
      } catch (error) {
        console.error('Error creating user:', error);
        showStatusMessage(error.message || 'Failed to create user.', 'danger');
      }
    });
    
    // Delete user by ID
    async function deleteUser(id) {
      try {
        const res = await fetch(`/api/users/${id}`, {
          method: 'DELETE',
          headers: {
            'Content-Type': 'application/json'
          }
        });
        
        if (!res.ok) {
          const error = await res.json();
          throw new Error(error.message || 'Failed to delete user');
        }
        
        showStatusMessage('User deleted successfully.', 'success');
        await loadUsers();
      } catch (e) {
        console.error('Error deleting user:', e);
        showStatusMessage(e.message || 'Failed to delete user.', 'danger');
      }
    }
    
    function filterUsers() {
      const keyword = document.getElementById('userSearch').value.toLowerCase();
      const filtered = users.filter(u =>
        u.username.toLowerCase().includes(keyword) ||
        u.email.toLowerCase().includes(keyword) ||
        u.role.toLowerCase().includes(keyword)
      );
      displayUsers(filtered);
    }
    
    // Delete user by ID

    
    // Statistics Functions
   function loadStatistics() {
  setTimeout(() => {
    // Example mock stats
    document.getElementById('totalArticles').textContent = articles.length;
    document.getElementById('totalUsers').textContent = users.length;
    document.getElementById('activeToday').textContent = Math.floor(Math.random() * 50) + 10;
    document.getElementById('newThisWeek').textContent = Math.floor(Math.random() * 10) + 1;

    // Get logged-in user from localStorage
    const user = JSON.parse(localStorage.getItem("user"));
	    // Show welcome message with username + icon
      const welcome = document.getElementById("welcomeMessage");
      if (welcome) {
        welcome.innerHTML = `
          <i class="fa-solid fa-user-circle" title="Account"></i>
          Welcome, <strong>${username}</strong>
        `;
      }

    const activityLog = document.getElementById('activityLog');
    activityLog.innerHTML = `
      <p>Welcome, <b>${user ? user.username : "Guest"}</b>!</p>
      <p>Admin logged in at ${new Date().toLocaleString()}</p>
    `;
  }, 300);
}

	  
    // Video functions
    const youtubePlayer = document.getElementById('youtubePlayer');
    const addVideoForm = document.getElementById('addVideoForm');
    const videoListDiv = document.getElementById('video-list');
    
    // Load videos when page loads
    async function loadVideos() {
      try {
        const response = await fetch('/api/videos');
        if (!response.ok) throw new Error('Failed to load videos');
        const videos = await response.json();
        
        videoListDiv.innerHTML = '';
        
        if (videos.length === 0) {
          videoListDiv.innerHTML = '<p class="text-center text-muted">No videos available.</p>';
          return;
        }
        
        videos.forEach(video => {
          const videoItem = document.createElement('div');
          videoItem.className = 'video-item';
          videoItem.dataset.videoId = video.youtube_id;
          videoItem.innerHTML = `
            <img src="https://img.youtube.com/vi/${video.youtube_id}/mqdefault.jpg" alt="Video Thumbnail">
            <p>${video.title || 'Untitled Video'}</p>
            <button class="delete-btn" data-id="${video.id}">Delete</button>
          `;
          videoItem.addEventListener('click', (e) => {
            if (!e.target.classList.contains('delete-btn')) {
              playVideo(video.youtube_id);
            }
          });
          videoListDiv.appendChild(videoItem);
        });
        
        // Attach delete event listeners
        document.querySelectorAll('.delete-btn').forEach(btn => {
          btn.addEventListener('click', async (e) => {
            e.stopPropagation();
            const videoId = e.target.dataset.id;
            
            if (confirm('Are you sure you want to delete this video?')) {
              await deleteVideo(videoId);
            }
          });
        });
      } catch (error) {
        console.error('Error loading videos:', error);
        showStatusMessage('Failed to load videos', 'danger');
      }
    }
    
    function playVideo(videoId) {
      youtubePlayer.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
    }
    
    // Handle video form submission
    addVideoForm.addEventListener('submit', async function(e) {
      e.preventDefault();
      const videoUrl = document.getElementById('videoUrl').value;
      const title = document.getElementById('videoTitle').value || undefined;
      
      try {
        const response = await fetch('/api/videos', {
          method: 'POST',
          headers: { 
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ videoUrl, title })
        });
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || 'Failed to add video');
        }
        
        const data = await response.json();
        showStatusMessage('Video added successfully!', 'success');
        addVideoForm.reset();
        loadVideo();
      } catch (error) {
        console.error('Error adding video:', error);
        showStatusMessage(error.message, 'danger');
      }
    });
    
    // Handle video deletion
    async function deleteVideo(id) {
      try {
        const response = await fetch(`/api/videos/${id}`, {
          method: 'DELETE'
        });
        
        if (!response.ok) {
          const error = await response.json();
          throw new Error(error.message || 'Failed to delete video');
        }
        
        showStatusMessage('Video deleted successfully!', 'success');
        loadVideos();
      } catch (error) {
        console.error('Error deleting video:', error);
        showStatusMessage(error.message, 'danger');
      }
    }

    // Open edit modal for an article (view + edit fields + image preview)
    async function openEditArticleModal(id){
      try {
        const res = await fetch(`/api/articles/${id}`);
        if (!res.ok) throw new Error('Failed to load article');
        const a = await res.json();

        const modal = document.getElementById('popup');
        const overlay = document.getElementById('overlay');
        modal.innerHTML = `
          <h3>Edit Article #${a.id}</h3>
          <form id="editArticleForm" enctype="multipart/form-data">
            <label class="form-label">Title</label>
            <input type="text" name="title" value="${(a.title||'').replace(/"/g,'&quot;')}" required />

            <label class="form-label">Content</label>
            <textarea name="content" rows="10" style="min-height:180px;">${(a.content||'')}</textarea>

            <label class="form-label">Category</label>
            <select name="category_id" id="edit_category_id" required></select>

            <div style="margin:8px 0;">
              <label><input type="checkbox" name="is_featured" ${a.is_featured ? 'checked' : ''}/> Featured</label>
              <label style="margin-left:12px;"><input type="checkbox" name="is_breaking" ${a.is_breaking ? 'checked' : ''}/> Breaking</label>
            </div>

            <label class="form-label">Image (optional)</label>
            <input type="file" id="edit_image" name="image" accept="image/*" />
            <div style="margin:8px 0;">
              ${a.image_url ? `<img id="edit_preview" src="${a.image_url}" style="max-width:100%;max-height:240px;border-radius:6px;"/>` : `<img id=\"edit_preview\" style=\"display:none;max-width:100%;max-height:240px;border-radius:6px;\"/>`}
            </div>

            <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:10px;">
              <button type="button" onclick="closePopup()">Cancel</button>
              <button type="submit">Save</button>
            </div>
          </form>
        `;
        modal.style.display = 'block';
        overlay.style.display = 'block';

        // Populate categories
        try {
          const catRes = await fetch('/api/categories');
          if (catRes.ok) {
            const cats = await catRes.json();
            const select = document.getElementById('edit_category_id');
            select.innerHTML = cats.map(c => `<option value="${c.id}" ${String(c.id)===String(a.category_id)?'selected':''}>${c.name}</option>`).join('');
          }
        } catch(_){/* ignore */}

        const form = document.getElementById('editArticleForm');
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          const fd = new FormData(form);
          fd.set('is_featured', form.querySelector('input[name="is_featured"]').checked ? 'true' : 'false');
          fd.set('is_breaking', form.querySelector('input[name="is_breaking"]').checked ? 'true' : 'false');
          try {
            const up = await fetch(`/api/articles/${id}`, { method: 'PUT', body: fd });
            if (!up.ok) {
              const er = await up.json().catch(()=>({}));
              throw new Error(er.message || 'Failed to update');
            }
            showStatusMessage('Article updated successfully.', 'success');
            closePopup();
            await loadArticles();
          } catch(err) {
            console.error(err);
            showStatusMessage(err.message || 'Update failed', 'danger');
          }
        });

        // Live preview on image select
        const imgInput = document.getElementById('edit_image');
        const preview = document.getElementById('edit_preview');
        if (imgInput) {
          imgInput.addEventListener('change', () => {
            const file = imgInput.files && imgInput.files[0];
            if (file) {
              const url = URL.createObjectURL(file);
              if (preview) {
                preview.src = url;
                preview.style.display = 'block';
              }
            }
          });
        }

      } catch (err) {
        console.error('openEditArticleModal error', err);
        showStatusMessage('Failed to open editor', 'danger');
      }
    }

    function closePopup(){
      const modal = document.getElementById('popup');
      const overlay = document.getElementById('overlay');
      if (modal) { modal.innerHTML = ''; modal.style.display = 'none'; }
      if (overlay) { overlay.style.display = 'none'; }
    }


// ---------------- Logout ----------------
function logout() {
  if (confirm('Are you sure you want to logout?')) {
    localStorage.removeItem('authToken');
    localStorage.removeItem('user');
    alert('You have been logged out successfully.');
    setTimeout(() => { window.location.href = 'login2.html'; }, 1000);
  }
}

// ---------------- Single Input Submission ----------------
const singleInputForm = document.getElementById('singleInputForm');
if(singleInputForm){
  singleInputForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const userInput = document.getElementById('userInput').value;
    try {
      const response = await fetch('/api/submit', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text: userInput })
      });
      const data = await response.json();
      alert(data.message);
      singleInputForm.reset();
    } catch (err) {
      alert('Error submitting input');
      console.error(err);
    }
  });
}

// ---------------- Video Management ----------------
async function loadVideo() {
  try {
    const res = await fetch('/api/home');
    const data = await res.json();
    const table = document.getElementById('videoTable');
    table.innerHTML = data.map(v => `
      <tr>
        <td>${v.id}</td>
        <td>${v.title}</td>
        <td>
          <iframe width="200" height="113" 
            src="https://www.youtube.com/embed/${v.youtube_id}" 
            frameborder="0" allowfullscreen></iframe>
        </td>
        <td>${new Date(v.created_at).toLocaleString()}</td>
        <td>
          <button onclick="deleteVide(${v.id})">Delete</button>
        </td>
      </tr>
    `).join('');
  } catch(err) {
    console.error(err);
  }
}

const videoForm = document.getElementById('videoFo');
if(videoFo){
  videoFo.addEventListener('submit', async (e) => {
    e.preventDefault();
    const videoUrl = document.getElementById('videoUr').value.trim();
    const title = document.getElementById('title').value.trim();
    try {
      const res = await fetch('/api/home', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ videoUrl, title })
      });
      const result = await res.json();
      if(result.success){
        loadVideo();
        e.target.reset();
      } else {
        alert(result.message || 'Failed to add video');
      }
    } catch(err){
      console.error(err);
    }
  });
}

async function deleteVide(id){
  if(!confirm('Delete this video?')) return;
  try {
    const res = await fetch(`/api/home/${id}`, { method: 'DELETE' });
    const result = await res.json();
    if(result.success) loadVideo();
    else alert(result.message || 'Failed to delete video');
  } catch(err) {
    console.error(err);
  }
}

// ---------------- Input List Management ----------------
async function fetchInputs() {
  try {
    const res = await fetch('/api/inputs');
    const data = await res.json();
    const list = document.getElementById('inputsList');
    if(!list) return;
    list.innerHTML = '';
    data.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.id}: ${item.text} (${new Date(item.created_at).toLocaleString()}) `;
      
      const delBtn = document.createElement('button');
      delBtn.textContent = 'Delete';
      delBtn.style.marginLeft = '10px';
      delBtn.onclick = async () => {
        if(!confirm('Are you sure you want to delete this input?')) return;
        try {
          const res = await fetch(`/api/inputs/${item.id}`, { method: 'DELETE' });
          const result = await res.json();
          if(result.success) fetchInputs();
          else alert('Error: ' + result.error);
        } catch(err) { console.error(err); alert('Network error'); }
      };
      li.appendChild(delBtn);
      list.appendChild(li);
    });
  } catch(err) {
    console.error(err);
  }
}


const inputsList = document.getElementById('inputsList');

async function fetchInputs() {
    try {
        const res = await fetch('/api/inputs');
        const data = await res.json();
        const list = document.getElementById('inputsList');
        list.innerHTML = '';

        data.forEach(item => {
            const li = document.createElement('li');
            li.textContent = `${item.id}: ${item.text} (${new Date(item.created_at).toLocaleString()}) `;

            // Delete button
            const delBtn = document.createElement('button');
            delBtn.textContent = 'Delete';
            delBtn.style.marginLeft = '10px';
            delBtn.onclick = async () => {
                if (!confirm('Are you sure you want to delete this input?')) return;

                try {
                    const res = await fetch(`/api/inputs/${item.id}`, { method: 'DELETE' });
                    const result = await res.json();
                    if (result.success) {
                        fetchInputs(); // reload list
                        messageDiv.textContent = 'Deleted successfully';
                    } else {
                        messageDiv.textContent = 'Error: ' + result.error;
                    }
                } catch (err) {
                    console.error(err);
                    messageDiv.textContent = 'Network error';
                }
            };

            li.appendChild(delBtn);
            list.appendChild(li);
        });
    } catch (err) {
        console.error(err);
        document.getElementById('inputsList').innerHTML = '<li>Failed to load inputs</li>';
    }
}

// Load inputs on page load
fetchInputs();
  
	  
	  //title img add lik baner
async function loadImages() {
      try {
        const res = await fetch('/api/title-image');
        const images = await res.json();

        const gallery = document.getElementById('gallery');
        gallery.innerHTML = images.map(img => `
          <div style="margin-bottom:20px; border:1px solid #ccc; padding:10px;">
            <h3 id="title-${img.id}">${img.title}</h3>
            <p id="desc-${img.id}">${img.description || ''}</p>
            <img src="/uploads/${img.image}" width="200" style="display:block; margin:10px 0;">
            <p>Uploaded: ${new Date(img.created_at).toLocaleString()}</p>
            <button onclick="deleteImagee(${img.id})">Delete</button>
            <button onclick="showEditFor(${img.id}, '${img.title}', '${img.description || ''}')">Edit</button>

            <div id="editForm-${img.id}" style="display:none; margin-top:10px;">
              <form onsubmit="return editImage(event, ${img.id})" enctype="multipart/form-data">
                <input type="text" name="title" value="${img.title}" required>
                <input type="text" name="description" value="${img.description || ''}" required>
                <input type="file" name="image" accept="image/*">
                <button type="submit">Save</button>
                <button type="button" onclick="cancelEdit(${img.id})">Cancel</button>
              </form>
            </div>
          </div>
        `).join('');
      } catch (err) {
        console.error("Failed to load images:", err);
      }
    }

    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);

      const res = await fetch('/api/title-image', {
        method: 'POST',
        body: formData
      });

      const data = await res.json();
      alert(data.message);
      e.target.reset();
      loadImages();
    });

    async function deleteImagee(id) {
      if (!confirm("Are you sure you want to delete this image?")) return;

      try {
        const res = await fetch(`/api/title-image/${id}`, { method: 'DELETE' });
        const data = await res.json();
        alert(data.message);
        loadImages();
      } catch (err) {
        console.error("Failed to delete image:", err);
        alert("Delete failed");
      }
    }

    function showEditFor(id, title, description) {
      document.getElementById(`editForm-${id}`).style.display = 'block';
    }

    function cancelEdit(id) {
      document.getElementById(`editForm-${id}`).style.display = 'none';
    }

    async function editImage(e, id) {
      e.preventDefault();
      const formData = new FormData(e.target);

      try {
        const res = await fetch(`/api/title-image/${id}`, {
          method: 'PUT',
          body: formData
        });

        const data = await res.json();
        alert(data.message);
        cancelEdit(id);
        loadImages();
      } catch (err) {
        console.error("Failed to edit image:", err);
        alert("Edit failed");
      }
    }
//img baner first
	   async function loadBanners() {
      const res = await fetch('/api/home-banner');
      const banners = await res.json();
      const gallery = document.getElementById('galler');
      gallery.innerHTML = banners.map(b => `
        <div style="margin-bottom:20px; border:1px solid #ccc; padding:10px;">
          <h3>${b.title}</h3>
          <p>${b.description}</p>
          <img src="/uploads/${b.image}" width="200" style="display:block; margin:10px 0;">
          <button onclick="deleteBann(${b.id})">Delete</button>
          <button onclick="showEditForm(${b.id}, '${b.title}', '${b.description}')">Edit</button>

          <div id="editForm-${b.id}" style="display:none; margin-top:10px;">
            <form onsubmit="return editBann(event, ${b.id})" enctype="multipart/form-data">
              <input type="text" name="title" value="${b.title}" required>
              <input type="text" name="description" value="${b.description}" required>
              <input type="file" name="image" accept="image/*">
              <button type="submit">Save</button>
              <button type="button" onclick="cancelEdit(${b.id})">Cancel</button>
            </form>
          </div>
        </div>
      `).join('');
    }

    document.getElementById('uploadForm').addEventListener('submit', async e => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch('/api/home-banner', { method: 'POST', body: formData });
      alert((await res.json()).message);
      e.target.reset();
      loadBanners();
    });

    async function deleteBann(id) {
      if (!confirm("Delete this banner?")) return;
      const res = await fetch(`/api/home-banner/${id}`, { method: 'DELETE' });
      alert((await res.json()).message);
      loadBanners();
    }

    function showEditForm(id) { document.getElementById(`editForm-${id}`).style.display = 'block'; }
    function cancelEdit(id) { document.getElementById(`editForm-${id}`).style.display = 'none'; }

    async function editBann(e, id) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch(`/api/home-banner/${id}`, { method: 'PUT', body: formData });
      alert((await res.json()).message);
      cancelEdit(id);
      loadBanners();
    }
	  //home_page_u
async function loadBanner() {
      const res = await fetch('/api/home_page_u');
      const banners = await res.json();
      const gallery = document.getElementById('galls');
      gallery.innerHTML = banners.map(b => `
        <div style="margin-bottom:20px; border:1px solid #ccc; padding:10px;">
          <h3>${b.title}</h3>
          <p>${b.description}</p>
          <img src="/uploads/${b.image}" width="200" style="display:block; margin:10px 0;">
          <button onclick="deleteBanner(${b.id})">Delete</button>
          <button onclick="showEditForm(${b.id}, '${b.title}', '${b.description}')">Edit</button>

          <div id="editForm-${b.id}" style="display:none; margin-top:10px;">
            <form onsubmit="return editBanner(event, ${b.id})" enctype="multipart/form-data">
              <input type="text" name="title" value="${b.title}" required>
              <input type="text" name="description" value="${b.description}" required>
              <input type="file" name="image" accept="image/*">
              <button type="submit">Save</button>
              <button type="button" onclick="cancelEdit(${b.id})">Cancel</button>
            </form>
          </div>
        </div>
      `).join('');
    }

    document.getElementById('uploadFor').addEventListener('submit', async e => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch('/api/home_page_u', { method: 'POST', body: formData });
      alert((await res.json()).message);
      e.target.reset();
      loadBanners();
    });

    async function deleteBanner(id) {
      if (!confirm("Delete this banner?")) return;
      const res = await fetch(`/api/home_page_u/${id}`, { method: 'DELETE' });
      alert((await res.json()).message);
      loadBanners();
    }

    function showEditForm(id) { document.getElementById(`editForm-${id}`).style.display = 'block'; }
    function cancelEdit(id) { document.getElementById(`editForm-${id}`).style.display = 'none'; }

    async function editBanner(e, id) {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch(`/api/home_page_u/${id}`, { method: 'PUT', body: formData });
      alert((await res.json()).message);
      cancelEdit(id);
      loadBanners();
    }

    loadBanner();

    loadBanners();
    loadImages();
// Initial load
loadVideos();
loadVideo();
loadArticles();
loadTitles();
	  
// Auto-refresh inputs every 5 seconds
fetchInputs();
setInterval(fetchInputs, 5000);
    </script>


</body>

</html>

</html>